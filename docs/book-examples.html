<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>xtsf3g Illustration and Replication â€¢ StataSFpanel3gen</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="xtsf3g Illustration and Replication"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">StataSFpanel3gen</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="book-examples.html">User Guide</a>
</li>
<li>
  <a href="news/index.html">News/Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>xtsf3g Illustration and Replication</h1>
    </div>


<div id="xtsf3g-illustration-and-replication" class="section level1">

<p>In this article, the functionalityIn this article, the functionality of the commands <strong>xtsf3gpss1</strong>, <strong>xtsf3gpss2</strong>, <strong>xtsf3gpss3</strong>, and <strong>xtsf3gkss</strong> are showcased. The subset of banking is used:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">use</span> ../../banks00_07, <span class="kw">clear</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="define-specifications">Define specifications<a class="anchor" aria-label="anchor" href="#define-specifications"></a></h1>
<p>Here are the specification and formula for first derivatives of the cost function with respect to input prices and outputs to check monotonicity assumptions and compute returns to scale.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">global</span> spetech <span class="st">"lny1 lny2 lnw1 trend c.half#(c.lny1#c.lny1 c.lny2#c.lny2 c.lnw1#c.lnw1) c.lny1#(c.lny2 c.lnw1) c.lny2#c.lnw1 c.trend#(c.lny1 c.lny2 c.lnw1 c.trend#c.half)"</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="kw">global</span> year_c = 2001</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="kw">global</span> itermax = 1000</span></code></pre></div>
<div class="section level2">
<h2 id="model-1">Model 1<a class="anchor" aria-label="anchor" href="#model-1"></a></h2>
<p><code>xtsf3gpss1</code> fits the PSS Type I estimator of the stochastic frontier model for panel data, where some regressors are allowed to be correlated with effects.</p>
<p>It allows using factor variables (see <code>fvvarlist</code>). Unbalanced panels are supported.</p>
<p>The estimation goes in two stages. First, <code>xtsf3gpss1</code> will go over the grid from <code>gr0</code> to <code>gr1</code> with a step/increment <code>gri</code> to find a bandwidth that results in the smallest MSE. In each of these grid points, <code>xtsf3gpss1</code> will do <code>reps</code> bootstrap replications. This grid search is extremely time-consuming. If bandwidth has been found previously for this specification (and only this specification), there is an option to specify this bandwidth using the <code>bandwidth</code>. In the second step, the PSS Type I estimator is obtained using the optimal bandwidth. The second step is very fast.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">clear</span> 1</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">on</span> 1</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>xtsf3gpss1 lnc <span class="ot">$spetech</span> <span class="kw">if</span> <span class="fu">year</span> &gt; <span class="ot">$year_c</span>, cost gr0(0.1) gr1(0.9) gri(0.1) reps(9)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">off</span> 1</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>estadd <span class="fu">scalar</span> AIC = <span class="fu">e</span>(aic)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>estadd <span class="fu">scalar</span> BIC = <span class="fu">e</span>(bic)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>eststo M1</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">clear</span> 1</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">on</span> 1</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>. xtsf3gpss1 lnc <span class="ot">$spetech</span> <span class="kw">if</span> <span class="fu">year</span> &gt; <span class="ot">$year_c</span>, cost gr0(0.1) gr1(0.9) gri(0.1) reps(9)</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>Description <span class="kw">of</span> the panel <span class="kw">data</span>:------------------------------------------------</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>      id:  1155, 2040, ..., 3217331                          n =        500</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>    <span class="fu">year</span>:  2002, 2003, ..., 2007                             T =          6</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>           Delta(<span class="fu">year</span>) = 1 unit</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>           Span(<span class="fu">year</span>)  = 6 periods</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>           (id*<span class="fu">year</span> uniquely identifies each observation)</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>Distribution <span class="kw">of</span> T_i:   <span class="fu">min</span>      5%     25%       50%       75%     95%     <span class="fu">max</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>                         2       2       4         6         6       6       6</span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a>     Freq.  Percent    Cum. |  Pattern</span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a> ---------------------------+---------</span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a>      289     57.80   57.80 |  111111</span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a>       34      6.80   64.60 |  11111.</span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a>       33      6.60   71.20 |  1111..</span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a>       27      5.40   76.60 |  111...</span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a>       24      4.80   81.40 |  11....</span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a>       15      3.00   84.40 |  11.111</span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a>       14      2.80   87.20 |  ..1111</span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a>       11      2.20   89.40 |  .11111</span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a>        5      1.00   90.40 |  .1111.</span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a>       48      9.60  100.00 | (other <span class="kw">patterns</span>)</span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a> ---------------------------+---------</span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a>      500    100.00         |  XXXXXX</span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a>  </span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a>Calculating optimal bandwidth <span class="kw">for</span> the PSS (some regressors are correlated with <span class="kw">effects</span>) estimator.</span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a>Please <span class="kw">be</span> patient!</span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a>It may take <span class="kw">long</span> time to compute <span class="kw">estimates</span> <span class="kw">if</span> the <span class="kw">data</span> <span class="kw">size</span> is large.</span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a>  </span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a>Choosing the bandwidth which has the smallest MSE <span class="kw">for</span> the PSS estimator.</span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a>Going <span class="bn">over</span> the <span class="bn">grid</span>, which contains 9 <span class="bn">grid</span> points</span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a>(<span class="kw">in</span> each <span class="bn">grid</span> point, 9 <span class="kw">bootstrap</span> replications are used)</span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a>----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 </span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a>.........  </span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a>  </span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a>Optimal bandwidth (<span class="kw">for</span> the within panel <span class="kw">data</span> estimator) is 0.1000</span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a>Sample:----------------------</span>
<span id="cb3-54"><a href="#cb3-54" tabindex="-1"></a> Number <span class="kw">of</span> <span class="kw">obs</span>    = 2546</span>
<span id="cb3-55"><a href="#cb3-55" tabindex="-1"></a> Number <span class="kw">of</span> groups = 500</span>
<span id="cb3-56"><a href="#cb3-56" tabindex="-1"></a>Diagnostics:-----------------</span>
<span id="cb3-57"><a href="#cb3-57" tabindex="-1"></a> R-squared        = 0.8214</span>
<span id="cb3-58"><a href="#cb3-58" tabindex="-1"></a> Adj R-squared    = 0.7763</span>
<span id="cb3-59"><a href="#cb3-59" tabindex="-1"></a> AIC              = -3.7229</span>
<span id="cb3-60"><a href="#cb3-60" tabindex="-1"></a> BIC              = -3.6885</span>
<span id="cb3-61"><a href="#cb3-61" tabindex="-1"></a> Root MSE         = 0.0937</span>
<span id="cb3-62"><a href="#cb3-62" tabindex="-1"></a>-----------------------------</span>
<span id="cb3-63"><a href="#cb3-63" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" tabindex="-1"></a>PSS Type <span class="fu">I</span> estimator: some regressors are correlated with <span class="kw">effects</span></span>
<span id="cb3-65"><a href="#cb3-65" tabindex="-1"></a>Park, Sickles, and Simar (1998), Journal <span class="kw">of</span> Econometrics, 84(2):273â€“301</span>
<span id="cb3-66"><a href="#cb3-66" tabindex="-1"></a></span>
<span id="cb3-67"><a href="#cb3-67" tabindex="-1"></a> Cost Stochastic Frontier</span>
<span id="cb3-68"><a href="#cb3-68" tabindex="-1"></a>----------------------------------------------------------------------------------------</span>
<span id="cb3-69"><a href="#cb3-69" tabindex="-1"></a>                   lnc | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]</span>
<span id="cb3-70"><a href="#cb3-70" tabindex="-1"></a>-----------------------+----------------------------------------------------------------</span>
<span id="cb3-71"><a href="#cb3-71" tabindex="-1"></a>                  lny1 |     0.2596     0.0388     6.68   0.000       0.1834      0.3357</span>
<span id="cb3-72"><a href="#cb3-72" tabindex="-1"></a>                  lny2 |    -1.9301     0.0873   -22.10   0.000      -2.1013     -1.7590</span>
<span id="cb3-73"><a href="#cb3-73" tabindex="-1"></a>                  lnw1 |    -0.0077     0.0470    -0.16   0.870      -0.0998      0.0845</span>
<span id="cb3-74"><a href="#cb3-74" tabindex="-1"></a>                 trend |    -0.5000     0.0324   -15.45   0.000      -0.5634     -0.4366</span>
<span id="cb3-75"><a href="#cb3-75" tabindex="-1"></a>                       |</span>
<span id="cb3-76"><a href="#cb3-76" tabindex="-1"></a>  c.half#c.lny1#c.lny1 |     0.0423     0.0014    30.82   0.000       0.0396      0.0449</span>
<span id="cb3-77"><a href="#cb3-77" tabindex="-1"></a>                       |</span>
<span id="cb3-78"><a href="#cb3-78" tabindex="-1"></a>  c.half#c.lny2#c.lny2 |     0.2722     0.0068    39.93   0.000       0.2588      0.2855</span>
<span id="cb3-79"><a href="#cb3-79" tabindex="-1"></a>                       |</span>
<span id="cb3-80"><a href="#cb3-80" tabindex="-1"></a>  c.half#c.lnw1#c.lnw1 |    -0.0226     0.0042    -5.42   0.000      -0.0308     -0.0145</span>
<span id="cb3-81"><a href="#cb3-81" tabindex="-1"></a>                       |</span>
<span id="cb3-82"><a href="#cb3-82" tabindex="-1"></a>         c.lny1#c.lny2 |    -0.0487     0.0027   -17.76   0.000      -0.0540     -0.0433</span>
<span id="cb3-83"><a href="#cb3-83" tabindex="-1"></a>                       |</span>
<span id="cb3-84"><a href="#cb3-84" tabindex="-1"></a>         c.lny1#c.lnw1 |    -0.0010     0.0017    -0.57   0.572      -0.0044      0.0024</span>
<span id="cb3-85"><a href="#cb3-85" tabindex="-1"></a>                       |</span>
<span id="cb3-86"><a href="#cb3-86" tabindex="-1"></a>         c.lny2#c.lnw1 |     0.0155     0.0035     4.40   0.000       0.0086      0.0225</span>
<span id="cb3-87"><a href="#cb3-87" tabindex="-1"></a>                       |</span>
<span id="cb3-88"><a href="#cb3-88" tabindex="-1"></a>        c.trend#c.lny1 |     0.0023     0.0013     1.78   0.075      -0.0002      0.0049</span>
<span id="cb3-89"><a href="#cb3-89" tabindex="-1"></a>                       |</span>
<span id="cb3-90"><a href="#cb3-90" tabindex="-1"></a>        c.trend#c.lny2 |     0.0103     0.0025     4.20   0.000       0.0055      0.0151</span>
<span id="cb3-91"><a href="#cb3-91" tabindex="-1"></a>                       |</span>
<span id="cb3-92"><a href="#cb3-92" tabindex="-1"></a>        c.trend#c.lnw1 |    -0.0105     0.0016    -6.50   0.000      -0.0137     -0.0073</span>
<span id="cb3-93"><a href="#cb3-93" tabindex="-1"></a>                       |</span>
<span id="cb3-94"><a href="#cb3-94" tabindex="-1"></a>c.trend#c.trend#c.half |     0.0768     0.0024    32.53   0.000       0.0722      0.0814</span>
<span id="cb3-95"><a href="#cb3-95" tabindex="-1"></a>----------------------------------------------------------------------------------------</span>
<span id="cb3-96"><a href="#cb3-96" tabindex="-1"></a></span>
<span id="cb3-97"><a href="#cb3-97" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">off</span> 1</span>
<span id="cb3-98"><a href="#cb3-98" tabindex="-1"></a></span>
<span id="cb3-99"><a href="#cb3-99" tabindex="-1"></a>. estadd <span class="fu">scalar</span> AIC = <span class="fu">e</span>(aic)</span>
<span id="cb3-100"><a href="#cb3-100" tabindex="-1"></a></span>
<span id="cb3-101"><a href="#cb3-101" tabindex="-1"></a>added <span class="fu">scalar</span>:</span>
<span id="cb3-102"><a href="#cb3-102" tabindex="-1"></a>                <span class="fu">e</span>(AIC) =  -3.7229442</span>
<span id="cb3-103"><a href="#cb3-103" tabindex="-1"></a></span>
<span id="cb3-104"><a href="#cb3-104" tabindex="-1"></a>. estadd <span class="fu">scalar</span> BIC = <span class="fu">e</span>(bic)</span>
<span id="cb3-105"><a href="#cb3-105" tabindex="-1"></a></span>
<span id="cb3-106"><a href="#cb3-106" tabindex="-1"></a>added <span class="fu">scalar</span>:</span>
<span id="cb3-107"><a href="#cb3-107" tabindex="-1"></a>                <span class="fu">e</span>(BIC) =  -3.6885239</span>
<span id="cb3-108"><a href="#cb3-108" tabindex="-1"></a></span>
<span id="cb3-109"><a href="#cb3-109" tabindex="-1"></a>. eststo M1</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-2">Model 2<a class="anchor" aria-label="anchor" href="#model-2"></a></h2>
<p><code>xtsf3gpss2</code> PSS Type II estimator of the stochastic frontier model for panel data, where error follow AR(1).</p>
<p>It allows using factor variables (see <code>fvvarlist</code>). Unbalanced panels are supported.</p>
<p>The estimation is performed in two stages. First, <code>xtsf3gpss2</code> will go over the grid from <code>gr0</code> to <code>gr1</code> with a step/increment <code>gri</code> to find a bandwidth that results in the smallest MSE. In each of these grid points, <code>xtsf3gpss2</code> will do <code>reps</code> bootstrap replications. This grid search is extremely time-consuming. If bandwidth has been found previously for this specification (and only this specification), there is an option to specify this bandwidth using the <code>bandwidth.</code> In the second step, the PSS Type II estimator is obtained using the optimal bandwidth. The second step is very fast.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">clear</span> 2</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">on</span> 2</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>xtsf3gpss2 lnc <span class="ot">$spetech</span> <span class="kw">if</span> <span class="fu">year</span> &gt; <span class="ot">$year_c</span>, cost gr0(0.1) gr1(0.9) gri(0.1) reps(9)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">off</span> 2</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>estadd <span class="fu">scalar</span> AIC = <span class="fu">e</span>(aicW)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>estadd <span class="fu">scalar</span> BIC = <span class="fu">e</span>(bicW)</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>eststo M2</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-3">Model 3<a class="anchor" aria-label="anchor" href="#model-3"></a></h2>
<p><code>xtsf3gpss3</code> PSS Type II estimator of the stochastic frontier model for panel data, where error follow AR(1).</p>
<p>It allows using factor variables (see <code>fvvarlist</code>). Unbalanced panels are supported.</p>
<p>The estimation is performed in two stages. First, <code>xtsf3gpss3</code> will go over the grid from <code>gr0</code> to <code>gr1</code> with a step/increment <code>gri</code> to find a bandwidth that results in the smallest MSE. In each of these grid points <code>reps</code> reps bootstrap replications will be performed. This grid search is extremely time-consuming. If bandwidth has been found previously for this specification (and only this specification), there is an option to specify this bandwidth using the <code>bw</code>. In the second step, the PSS Type III estimator is obtained using the optimal bandwidth. The second step is very fast.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">clear</span> 3</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">on</span> 3</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>xtsf3gpss3 lnc <span class="ot">$spetech</span> <span class="kw">if</span> <span class="fu">year</span> &gt; <span class="ot">$year_c</span>, cost gr0(0.1) gr1(0.9) gri(0.1) reps(9)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">off</span> 3</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>estadd <span class="fu">scalar</span> AIC = <span class="fu">e</span>(aic)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>estadd <span class="fu">scalar</span> BIC = <span class="fu">e</span>(bic)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>eststo M3</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-4">Model 4<a class="anchor" aria-label="anchor" href="#model-4"></a></h2>
<p><code>xtsf3gkss</code> fits the KSS estimator of the stochastic frontier model for panel data, where arbitrary temporal heterogeneity is allowed.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">clear</span> 4</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">on</span> 4</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>xtsf3gkss lnc <span class="ot">$spetech</span> <span class="kw">if</span> <span class="fu">year</span> &gt; <span class="ot">$year_c</span>, cost gr0(0.1) gr1(1.0) gri(0.1) li(3) ls(7) imean tmean <span class="dv">level</span>(99) cformat(%9.4f)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">off</span> 4</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>estadd <span class="fu">scalar</span> AIC = <span class="fu">e</span>(aic)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>estadd <span class="fu">scalar</span> BIC = <span class="fu">e</span>(bic)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>eststo M4</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">clear</span> 4</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">on</span> 4</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>. xtsf3gkss lnc <span class="ot">$spetech</span> <span class="kw">if</span> <span class="fu">year</span> &gt; <span class="ot">$year_c</span>, cost gr0(0.1) gr1(1.0) gri(0.1) li(3) ls(7) imean tmean <span class="dv">level</span>(99) cformat(%</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>&gt; 9.4f)</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>Description <span class="kw">of</span> the panel <span class="kw">data</span>:------------------------------------------------</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>      id:  1155, 2040, ..., 3217331                          n =        500</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>    <span class="fu">year</span>:  2002, 2003, ..., 2007                             T =          6</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>           Delta(<span class="fu">year</span>) = 1 unit</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>           Span(<span class="fu">year</span>)  = 6 periods</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>           (id*<span class="fu">year</span> uniquely identifies each observation)</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a>Distribution <span class="kw">of</span> T_i:   <span class="fu">min</span>      5%     25%       50%       75%     95%     <span class="fu">max</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>                         2       2       4         6         6       6       6</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>     Freq.  Percent    Cum. |  Pattern</span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a> ---------------------------+---------</span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a>      289     57.80   57.80 |  111111</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a>       34      6.80   64.60 |  11111.</span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>       33      6.60   71.20 |  1111..</span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>       27      5.40   76.60 |  111...</span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>       24      4.80   81.40 |  11....</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>       15      3.00   84.40 |  11.111</span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>       14      2.80   87.20 |  ..1111</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>       11      2.20   89.40 |  .11111</span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a>        5      1.00   90.40 |  .1111.</span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a>       48      9.60  100.00 | (other <span class="kw">patterns</span>)</span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a> ---------------------------+---------</span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a>      500    100.00         |  XXXXXX</span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a>  </span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a>Select L such that Cl is less than 2.33</span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a>Please <span class="kw">be</span> patient!</span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a>It may take <span class="kw">long</span> time to compute <span class="kw">estimates</span> <span class="kw">if</span> the <span class="kw">data</span> <span class="kw">size</span> is large.</span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a>  </span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a>Going <span class="bn">over</span> the <span class="bn">grid</span>, which contains 5 <span class="bn">grid</span> points</span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a>----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 </span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a>.</span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a>Sample:----------------------</span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a> Number <span class="kw">of</span> <span class="kw">obs</span>    = 2546</span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a> Number <span class="kw">of</span> groups = 500</span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a>Diagnostics:-----------------</span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a> R-squared        = 0.5480</span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a> Adj R-squared    = 0.4338</span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a> AIC              = -1.8907</span>
<span id="cb6-56"><a href="#cb6-56" tabindex="-1"></a> BIC              = -1.8563</span>
<span id="cb6-57"><a href="#cb6-57" tabindex="-1"></a> Root MSE         = 0.2343</span>
<span id="cb6-58"><a href="#cb6-58" tabindex="-1"></a>-----------------------------</span>
<span id="cb6-59"><a href="#cb6-59" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" tabindex="-1"></a>Kneip-Sickles-Song Estimator</span>
<span id="cb6-61"><a href="#cb6-61" tabindex="-1"></a>Kneip, Sickles, and Song (2012), Econometric Theory, 28(3):590â€“628</span>
<span id="cb6-62"><a href="#cb6-62" tabindex="-1"></a></span>
<span id="cb6-63"><a href="#cb6-63" tabindex="-1"></a> Cost Stochastic Frontier</span>
<span id="cb6-64"><a href="#cb6-64" tabindex="-1"></a>----------------------------------------------------------------------------------------</span>
<span id="cb6-65"><a href="#cb6-65" tabindex="-1"></a>                   lnc | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]</span>
<span id="cb6-66"><a href="#cb6-66" tabindex="-1"></a>-----------------------+----------------------------------------------------------------</span>
<span id="cb6-67"><a href="#cb6-67" tabindex="-1"></a>                  lny1 |    -0.0813     0.1752    -0.46   0.643      -0.4247      0.2621</span>
<span id="cb6-68"><a href="#cb6-68" tabindex="-1"></a>                  lny2 |    -2.7225     0.6251    -4.36   0.000      -3.9476     -1.4974</span>
<span id="cb6-69"><a href="#cb6-69" tabindex="-1"></a>                  lnw1 |    -0.2761     0.2035    -1.36   0.175      -0.6749      0.1227</span>
<span id="cb6-70"><a href="#cb6-70" tabindex="-1"></a>                 trend |    -0.4539     0.0857    -5.30   0.000      -0.6218     -0.2859</span>
<span id="cb6-71"><a href="#cb6-71" tabindex="-1"></a>                       |</span>
<span id="cb6-72"><a href="#cb6-72" tabindex="-1"></a>  c.half#c.lny1#c.lny1 |     0.0121     0.0054     2.23   0.026       0.0014      0.0228</span>
<span id="cb6-73"><a href="#cb6-73" tabindex="-1"></a>                       |</span>
<span id="cb6-74"><a href="#cb6-74" tabindex="-1"></a>  c.half#c.lny2#c.lny2 |     0.2557     0.0519     4.92   0.000       0.1539      0.3575</span>
<span id="cb6-75"><a href="#cb6-75" tabindex="-1"></a>                       |</span>
<span id="cb6-76"><a href="#cb6-76" tabindex="-1"></a>  c.half#c.lnw1#c.lnw1 |    -0.0396     0.0145    -2.72   0.007      -0.0681     -0.0111</span>
<span id="cb6-77"><a href="#cb6-77" tabindex="-1"></a>                       |</span>
<span id="cb6-78"><a href="#cb6-78" tabindex="-1"></a>         c.lny1#c.lny2 |     0.0052     0.0150     0.34   0.731      -0.0243      0.0346</span>
<span id="cb6-79"><a href="#cb6-79" tabindex="-1"></a>                       |</span>
<span id="cb6-80"><a href="#cb6-80" tabindex="-1"></a>         c.lny1#c.lnw1 |     0.0203     0.0049     4.13   0.000       0.0107      0.0299</span>
<span id="cb6-81"><a href="#cb6-81" tabindex="-1"></a>                       |</span>
<span id="cb6-82"><a href="#cb6-82" tabindex="-1"></a>         c.lny2#c.lnw1 |     0.0258     0.0175     1.47   0.141      -0.0085      0.0600</span>
<span id="cb6-83"><a href="#cb6-83" tabindex="-1"></a>                       |</span>
<span id="cb6-84"><a href="#cb6-84" tabindex="-1"></a>        c.trend#c.lny1 |    -0.0115     0.0033    -3.49   0.000      -0.0180     -0.0051</span>
<span id="cb6-85"><a href="#cb6-85" tabindex="-1"></a>                       |</span>
<span id="cb6-86"><a href="#cb6-86" tabindex="-1"></a>        c.trend#c.lny2 |     0.0358     0.0064     5.60   0.000       0.0233      0.0483</span>
<span id="cb6-87"><a href="#cb6-87" tabindex="-1"></a>                       |</span>
<span id="cb6-88"><a href="#cb6-88" tabindex="-1"></a>        c.trend#c.lnw1 |     0.0008     0.0046     0.16   0.869      -0.0082      0.0097</span>
<span id="cb6-89"><a href="#cb6-89" tabindex="-1"></a>                       |</span>
<span id="cb6-90"><a href="#cb6-90" tabindex="-1"></a>c.trend#c.trend#c.half |     0.0400     0.0042     9.44   0.000       0.0317      0.0482</span>
<span id="cb6-91"><a href="#cb6-91" tabindex="-1"></a>----------------------------------------------------------------------------------------</span>
<span id="cb6-92"><a href="#cb6-92" tabindex="-1"></a></span>
<span id="cb6-93"><a href="#cb6-93" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">off</span> 4</span>
<span id="cb6-94"><a href="#cb6-94" tabindex="-1"></a></span>
<span id="cb6-95"><a href="#cb6-95" tabindex="-1"></a>. estadd <span class="fu">scalar</span> AIC = <span class="fu">e</span>(aic)</span>
<span id="cb6-96"><a href="#cb6-96" tabindex="-1"></a></span>
<span id="cb6-97"><a href="#cb6-97" tabindex="-1"></a>added <span class="fu">scalar</span>:</span>
<span id="cb6-98"><a href="#cb6-98" tabindex="-1"></a>                <span class="fu">e</span>(AIC) =  -1.8907164</span>
<span id="cb6-99"><a href="#cb6-99" tabindex="-1"></a></span>
<span id="cb6-100"><a href="#cb6-100" tabindex="-1"></a>. estadd <span class="fu">scalar</span> BIC = <span class="fu">e</span>(bic)</span>
<span id="cb6-101"><a href="#cb6-101" tabindex="-1"></a></span>
<span id="cb6-102"><a href="#cb6-102" tabindex="-1"></a>added <span class="fu">scalar</span>:</span>
<span id="cb6-103"><a href="#cb6-103" tabindex="-1"></a>                <span class="fu">e</span>(BIC) =  -1.8562961</span>
<span id="cb6-104"><a href="#cb6-104" tabindex="-1"></a></span>
<span id="cb6-105"><a href="#cb6-105" tabindex="-1"></a>. eststo M4</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="results-of-models-1-4">Results of Models 1-4<a class="anchor" aria-label="anchor" href="#results-of-models-1-4"></a></h2>
<p>Use <em>estout</em> command for this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>estout M1 M2 M3 M4, <span class="co">///</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a> cells(b(<span class="kw">star</span> fmt(%9.4f)) se(par)) <span class="co">///</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a> <span class="kw">stats</span>(AIC BIC shat RSS ll <span class="kw">N</span> sumTi, <span class="co">///</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a> labels(<span class="st">"AIC"</span> <span class="st">"BIC"</span> <span class="st">"\$\hat\sigma\$"</span> <span class="st">"RSS"</span> <span class="st">"log-likelihood"</span> <span class="st">"\$N\$"</span> <span class="st">"\$\sum T_{i}\$"</span>) <span class="co">///</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a> fmt(%9.4f %9.4f %9.4f %9.2f %9.2f %9.0f %9.0f)) <span class="co">///</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a> starlevels(* 0.10 ** 0.05 *** 0.01) <span class="co">///</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a> varlabels(<span class="dt">_cons</span> Constant ) <span class="co">///</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a> substitute(<span class="st">"_ "</span> <span class="st">"Frontier"</span>) <span class="co">///</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a> <span class="bn">legend</span> <span class="kw">label</span> collabels(<span class="kw">none</span>) mlabels(<span class="kw">none</span>) <span class="kw">replace</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="execution-speed-models-1-4">Execution Speed, Models 1-4<a class="anchor" aria-label="anchor" href="#execution-speed-models-1-4"></a></h2>
<p>It took so many seconds:</p>
<p>``` stata timer list 1 timer list 2 timer list 3 timer list 4</p>
<p>. timer list 1 1: 21.96 / 1 = 21.9630</p>
<p>. timer list 2 2: 0.00 / 1 = 0.0000</p>
<p>. timer list 3 3: 0.00 / 1 = 0.0000</p>
<p>. timer list 4 4: 20.53 / 1 = 20.5340 ``</p>
<p>That is it for now.</p>
</div>
</div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://OlegBadunenko.github.io/" class="external-link">Oleg Badunenko</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

